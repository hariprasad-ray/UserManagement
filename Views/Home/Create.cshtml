
@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    ViewData["Title"] = "User Creation";
}

<div class="card">
    <div class="card-header bg-primary text-white">
        <h4>User Creation</h4>
    </div>
    <div class="card-body">
        <form>
            <div class="mb-3">
                <label for="firstname" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstname" placeholder="Enter first name">
            </div>
            <div class="mb-3">
                <label for="lastname" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastname" placeholder="Enter last name">
            </div>
            <div class="mb-3">
                <label for="useremail" class="form-label">User Email</label>
                <input type="email" class="form-control" id="useremail" placeholder="Enter email">
            </div>
            <div class="mb-3">
                <label for="useraddress" class="form-label">User Address</label>
                <input type="text" class="form-control" id="useraddress" placeholder="Enter address">
            </div>
            <div class="mb-3">
                <label class="form-label">Is Active</label>
                <div>
                    <input type="radio" name="isactive" id="activeYes" value="True"> <label for="activeYes">Yes</label>
                    <input type="radio" name="isactive" id="activeNo" value="False" class="ms-3"> <label for="activeNo">No</label>
                </div>
            </div>
            <button type="button" class="btn btn-primary" id="createUser" onclick="saveUser()">Create</button>
        </form>

        <span id="statusMsg" style="color:green"></span>

    </div>
</div>




<script>

    function saveUser() {
    
        var selected = $("input[type='radio'][name='isactive']:checked");

        var userData = {
            firstName : $("#firstname").val(),
            lastName : $("#lastname").val(),
            email : $("#useremail").val(),
            address : $("#useraddress").val(),
            isActive : selected.length > 0 ? selected.val() : 0
        }

        //add validation at script level

        $.ajax({

            url: '@Url.Action("Create", "Home")',
            type: "POST",
            data: userData,
            success: function (response) {            
                $('#statusMsg').text('User added successfully !'); //make sure it stays for 5 sec, with out appending                
            },
            error: function (request, status, error) {
                $('#statusMsg').text('User creation failed, please trye again !'); //make sure it stays for 5 sec, with out appending
            }
        });

    }


</script>